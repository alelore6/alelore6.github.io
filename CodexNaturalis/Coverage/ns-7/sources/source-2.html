


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > ChatPanel</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">it.polimi.ingsw.Graphical</a>
</div>

<h1>Coverage Summary for Class: ChatPanel (it.polimi.ingsw.Graphical)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ChatPanel</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/48)
  </span>
</td>
</tr>
  <tr>
    <td class="name">ChatPanel$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/50)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package it.polimi.ingsw.Graphical;
&nbsp;
&nbsp;import javax.swing.*;
&nbsp;import java.awt.*;
&nbsp;import java.awt.event.ActionEvent;
&nbsp;import java.awt.event.ActionListener;
&nbsp;
&nbsp;/**
&nbsp; * the panel that contains chat between all players and between only two players.
&nbsp; */
&nbsp;class ChatPanel extends JPanel {
&nbsp;    /**
&nbsp;     * Chat Area is where you can visualize all messages.
&nbsp;     */
&nbsp;    private final JTextArea chatArea;
&nbsp;    /**
&nbsp;     * Input area is where you can write any message.
&nbsp;     */
&nbsp;    private final JTextArea inputArea;
&nbsp;    /**
&nbsp;     * Recipient that contains all the nicknames of  message receivers and the public board option.
&nbsp;     */
&nbsp;    private  JComboBox&lt;String&gt; recipientComboBox;
&nbsp;
&nbsp;    private final Font plainFont;
&nbsp;    private final MainFrame f;
&nbsp;
&nbsp;    /**
&nbsp;     * Constructor: creates the input area , the chat area and the send button;
&nbsp;     * then it creates scroll pane to be able to send and receive any number of messages.
&nbsp;     * @param f: the UI that communicates with the Main Frame.
&nbsp;     */
&nbsp;    public ChatPanel(MainFrame f) {
<b class="nc">&nbsp;        super(new BorderLayout());</b>
<b class="nc">&nbsp;        this.f = f;</b>
<b class="nc">&nbsp;        setMinimumSize(new Dimension(300, 500));</b>
<b class="nc">&nbsp;        setPreferredSize(new Dimension(300, 500));</b>
&nbsp;
<b class="nc">&nbsp;        plainFont = new Font(&quot;Serif&quot;, Font.PLAIN, 16);</b>
&nbsp;
<b class="nc">&nbsp;        chatArea = new JTextArea(20, 30);</b>
<b class="nc">&nbsp;        chatArea.setEditable(false);</b>
<b class="nc">&nbsp;        chatArea.setLineWrap(true);</b>
<b class="nc">&nbsp;        chatArea.setWrapStyleWord(true);</b>
<b class="nc">&nbsp;        chatArea.setBackground(Color.decode(&quot;#d9dbc1&quot;));</b>
<b class="nc">&nbsp;        chatArea.setFont(plainFont);</b>
&nbsp;
<b class="nc">&nbsp;        inputArea = new JTextArea(4, 30);</b>
<b class="nc">&nbsp;        inputArea.setLineWrap(true);</b>
<b class="nc">&nbsp;        inputArea.setWrapStyleWord(true);</b>
<b class="nc">&nbsp;        inputArea.setFont(plainFont);</b>
&nbsp;
<b class="nc">&nbsp;        JButton sendButton = new JButton(&quot;Send&quot;);</b>
<b class="nc">&nbsp;        sendButton.addActionListener(new ActionListener() {</b>
&nbsp;            @Override
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                sendChatMessage();</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        JScrollPane chatScrollPane = new JScrollPane(chatArea);</b>
<b class="nc">&nbsp;        JScrollPane inputScrollPane = new JScrollPane(inputArea);</b>
&nbsp;
<b class="nc">&nbsp;        JPanel inputPanel = new JPanel(new BorderLayout());</b>
<b class="nc">&nbsp;        inputPanel.add(inputScrollPane, BorderLayout.CENTER);</b>
<b class="nc">&nbsp;        inputPanel.add(sendButton, BorderLayout.EAST);</b>
&nbsp;
<b class="nc">&nbsp;        add(chatScrollPane, BorderLayout.CENTER);</b>
<b class="nc">&nbsp;        add(inputPanel, BorderLayout.SOUTH);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Creates the Recipient with all the names and the &quot;Public&quot; option.
&nbsp;     * @param nickname : contains all the nicknames of other players who you can chat to.
&nbsp;     */
&nbsp;  public void createRecipient(String[] nickname) {
<b class="nc">&nbsp;      recipientComboBox = new JComboBox&lt;&gt;(getRecipientOptions(nickname));</b>
<b class="nc">&nbsp;      recipientComboBox.setFont(plainFont);</b>
<b class="nc">&nbsp;      recipientComboBox.setToolTipText(&quot;Recipient (select &#39;Public&#39; for public message)&quot;);</b>
&nbsp;
<b class="nc">&nbsp;      JPanel recipientPanel = new JPanel(new BorderLayout());</b>
<b class="nc">&nbsp;      recipientPanel.add(recipientComboBox, BorderLayout.CENTER);</b>
<b class="nc">&nbsp;      recipientPanel.add(new JLabel(&quot;Recipient:&quot;), BorderLayout.WEST);</b>
&nbsp;
<b class="nc">&nbsp;      add(recipientPanel, BorderLayout.NORTH);</b>
&nbsp;
&nbsp;  }
&nbsp;
&nbsp;    /**
&nbsp;     * This the getter of all names in Recipient to chat to and Public option.
&nbsp;     * @param nicknames nicknames of all players
&nbsp;     * @return the valid options as array
&nbsp;     */
&nbsp;    private String[] getRecipientOptions(String[] nicknames) {
<b class="nc">&nbsp;        String[] options = new String[nicknames.length + 1];</b>
<b class="nc">&nbsp;        options[0] = &quot;Public&quot;;</b>
<b class="nc">&nbsp;        System.arraycopy(nicknames, 0, options, 1, nicknames.length);</b>
<b class="nc">&nbsp;        return options;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Send message option,is the command that actually sends the message through send button.
&nbsp;     */
&nbsp;    private void sendChatMessage() {
<b class="nc">&nbsp;        String message = inputArea.getText().trim();</b>
<b class="nc">&nbsp;        String recipient = &quot;Public&quot;;</b>
<b class="nc">&nbsp;        if (recipientComboBox!=null) {</b>
<b class="nc">&nbsp;             recipient = (String) recipientComboBox.getSelectedItem();</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!message.isEmpty()) {</b>
<b class="nc">&nbsp;            if (&quot;Public&quot;.equals(recipient)) {</b>
<b class="nc">&nbsp;                chatArea.append(&quot; Me: &quot; + message + &quot;\n&quot;);</b>
<b class="nc">&nbsp;                f.sendChatMessage(message);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                chatArea.append(&quot; Me to &quot; + recipient + &quot;: &quot; + message + &quot;\n&quot;);</b>
<b class="nc">&nbsp;                f.sendPrivateChatMessage(message, recipient);</b>
&nbsp;            }
<b class="nc">&nbsp;            inputArea.setText(&quot;&quot;);</b>
<b class="nc">&nbsp;            if(recipientComboBox!=null) recipientComboBox.setSelectedIndex(0);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This is the line that add the message to the chat area where who received the message can read it.
&nbsp;     * @param message the  received message
&nbsp;     * @param nickname the sender of the message
&nbsp;     */
&nbsp;    public void addChatMessage(String message, String nickname) {
<b class="nc">&nbsp;        chatArea.append(&quot; &quot; + nickname.toUpperCase() + &quot;: &quot; + message + &quot;\n&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;}
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-07-03 15:07</div>
</div>
</body>
</html>
